<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Summary (prometheus.Prometheus.Summary)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../index.html">prometheus</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Prometheus.Summary</span></h1></header><div class="doc"><p>A summary is a metric that records both the number of readings and their total.
This allows calculating the average.</p></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../index.html#module-type-METRIC">METRIC</a></code></span></summary><div class="spec type" id="type-family"><a href="#type-family" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>family</code><code></code><code></code></div><div class="doc"><p>A collection of metrics that are the same except for their labels.
e.g. &quot;Number of HTTP responses&quot;</p></div></div><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>t</code><code></code><code></code></div><div class="doc"><p>A particular metric.
e.g. &quot;Number of HTTP responses with code=404&quot;</p></div></div><div class="spec val" id="val-v_labels"><a href="#val-v_labels" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>v_labels : label_names:string list <span class="keyword">&#8209;&gt;</span> ?&#8288;registry:<a href="../CollectorRegistry/index.html#type-t">CollectorRegistry.t</a> <span class="keyword">&#8209;&gt;</span> help:string <span class="keyword">&#8209;&gt;</span> ?&#8288;namespace:string <span class="keyword">&#8209;&gt;</span> ?&#8288;subsystem:string <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-family">family</a></code></div><div class="doc"><p><code class="code">v_labels ~label_names ~help ~namespace ~subsystem name</code> is a family of metrics with full name
<code class="code">namespace_subsystem_name</code> and documentation string <code class="code">help</code>. Each metric in the family will provide
a value for each of the labels.
The new family is registered with <code class="code">registry</code> (default: <a href="../CollectorRegistry/index.html#val-default">CollectorRegistry.default</a>).</p></div></div><div class="spec val" id="val-labels"><a href="#val-labels" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>labels : <a href="index.html#type-family">family</a> <span class="keyword">&#8209;&gt;</span> string list <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">labels family label_values</code> is the metric in <code class="code">family</code> with these values for the labels.
The order of the values must be the same as the order of the <code class="code">label_names</code> passed to <code class="code">v_labels</code>;
you may wish to write a wrapper function with labelled arguments to avoid mistakes.
If this is called multiple times with the same set of values, the existing metric will be returned.</p></div></div><div class="spec val" id="val-v_label"><a href="#val-v_label" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>v_label : label_name:string <span class="keyword">&#8209;&gt;</span> ?&#8288;registry:<a href="../CollectorRegistry/index.html#type-t">CollectorRegistry.t</a> <span class="keyword">&#8209;&gt;</span> help:string <span class="keyword">&#8209;&gt;</span> ?&#8288;namespace:string <span class="keyword">&#8209;&gt;</span> ?&#8288;subsystem:string <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">v_label</code> is a convenience wrapper around <code class="code">v_labels</code> for the case where there is a single label.
The result is a function from the single label's value to the metric.</p></div></div><div class="spec val" id="val-v"><a href="#val-v" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>v : ?&#8288;registry:<a href="../CollectorRegistry/index.html#type-t">CollectorRegistry.t</a> <span class="keyword">&#8209;&gt;</span> help:string <span class="keyword">&#8209;&gt;</span> ?&#8288;namespace:string <span class="keyword">&#8209;&gt;</span> ?&#8288;subsystem:string <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">v</code> is a convenience wrapper around <code class="code">v_labels</code> for the case where there are no labels.</p></div></div></details></div><div class="spec val" id="val-observe"><a href="#val-observe" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>observe : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> float <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">observe t v</code> increases the total by <code class="code">v</code> and the count by one.</p></div></div><div class="spec val" id="val-time"><a href="#val-time" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>time : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> (unit <span class="keyword">&#8209;&gt;</span> float) <span class="keyword">&#8209;&gt;</span> (unit <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> Lwt.t) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> Lwt.t</code></div><div class="doc"><p><code class="code">time t gettime f</code> calls <code class="code">gettime ()</code> before and after executing <code class="code">f ()</code> and
observes the difference.</p></div></div></body></html>